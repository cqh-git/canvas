<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			* {
				padding: 0;
				margin: 0;
			}

			#box {
				position: relative;
				width: 100%;
				height: 100px;
				border-bottom: 1px solid #000000;
			}

			div {
				width: 100px;
				height: 100px;

				position: absolute;
			}

			#left {
				background: red;
				left: 10px;
				border-radius: 50%;
			}

			#right {
				background: blue;
				right: 10px;
				border-radius: 50%;
			}
		</style>
	</head>
	<body>
		<div id="box">
			<div id="left"></div>
			<div id="right"></div>
		</div>
		<button onclick="beginAnimate()">开始运动</button>
		<script>
			var left = document.getElementById('left');
			var right = document.getElementById('right');

			function beginAnimate() {
				animate(left, 300)
				animate(right, 300)
			}

			function animate(ele, target) {
				var dir = ele.offsetLeft < target ? 1 : -1,speed = 10;
				clearInterval(ele.timer);
				ele.timer = setInterval(() => {
					if (Math.abs(ele.offsetLeft - target) > speed) {
						ele.style.left = ele.offsetLeft + dir * speed + 'px';
					} else {
						clearInterval(ele.timer);
						ele.style.left = target + 'px';
					}
				}, 20)
			}
		</script>
	</body>
</html>
